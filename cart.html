<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="public/assets/bootstrap-4.6.2/css/bootstrap.min.css">
  <title>Homepage</title>
  <script src="https://kit.fontawesome.com/e2a332a799.js" crossorigin="anonymous"></script>
  <link rel="shortcut icon" href="public/img/logo.svg" type="image/x-icon">
  <script src="public/assets/jquery-3.7.1/jquery-3.7.1.min.js"></script>
  <link rel="stylesheet" href="public/css/styles.css">
  <script>
    $(() => {
      $('#footer').load('components/footer.html')
    })
  </script>
  <script>  (function (g, u, i, d, e, s) { g[e] = g[e] || []; var f = u.getElementsByTagName(i)[0]; var k = u.createElement(i); k.async = true; k.src = 'https://static.userguiding.com/media/user-guiding-' + s + '-embedded.js'; f.parentNode.insertBefore(k, f); if (g[d]) return; var ug = g[d] = { q: [] }; ug.c = function (n) { return function () { ug.q.push([n, arguments]) }; }; var m = ['previewGuide', 'finishPreview', 'track', 'identify', 'hideChecklist', 'launchChecklist']; for (var j = 0; j < m.length; j += 1) { ug[m[j]] = ug.c(m[j]); } })(window, document, 'script', 'userGuiding', 'userGuidingLayer', '5BQ74310YKNID');</script>
</head>

<body>
  <nav id="w0" class="navbar navbar-expand-lg navbar-light bg-light navbar">
    <div class="container">
      <a class="text-gradient navbar-brand" href="/"><i class="fas fa-solid fa-dolly" aria-hidden="true"></i> JUST BUY
        ITT</a>
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#w0-collapse"
        aria-controls="w0-collapse" aria-expanded="true" aria-label="Toggle navigation"><span
          class="navbar-toggler-icon"></span></button>
      <div id="w0-collapse" class="navbar-collapse collapse">
        <form class="d-flex" action="/search">
          <input class="form-control me-2 nav-search-bar" type="search" placeholder="What are you looking for ?"
            name="keyword" value="">
          <button type="button" class="btn btn-secondary rounded ml-2 text-gradient"
            style="border: 1px solid #ced4da"><i class="fa-solid fa-magnifying-glass"></i></button>
        </form>
        <ul id="w1" class="navbar-nav me-auto mb-2 mb-md-0 ml-auto nav">
          <li class="nav-item"><a class="nav-link" style="opacity: 0.7;" href="/index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" style="opacity: 0.7;" href="/about.html">About</a></li>
          <li class="nav-item"><a class="nav-link" style="opacity: 0.7;" href="/contact.html">Contact</a></li>
          <li class="nav-item"><a class="nav-link" style="opacity: 0.7;" href="/signup.html">Signup</a></li>
          <li class="nav-item"><a class="nav-link" style="opacity: 0.7;" href="/login.html">Login</a></li>
        </ul>
        <div class="d-flex">
          <a href="/cart.html">
            <button class="btn btn-outline-dark rounded" type="submit">
              <i class="fa-solid fa-cart-shopping"></i>
              Cart
              <span id="cart-quantity" class="badge bg-dark text-white ms-1 rounded-pill">2</span>
            </button>
          </a>
        </div>
      </div>
  </nav>
  </div>
  <div id="content" class="container px-4 px-lg-5 mt-3" style="min-height:600px">
    <div class="card">
      <div class="card-header">
        <h3>Your cart items</h3>
      </div>
      <div class="card-body">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Product</th>
              <th>Image</th>
              <th>Unit Price</th>
              <th>Quantity</th>
              <th>Total cost</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr data-id="1" data-url="/cart/change-quantity">
              <td>Iphone 13</td>
              <td>
                <img src="public/img/product 3.jpg" style="width: 70px" alt="Iphone 15">
              </td>
              <td class="unit-price">$ 1 999.00</td>
              <td>
                <input type="number" min="1" class="form-control item-quantity" style="width: 60px" value="1">
              </td>
              <td class="row-total-cost">$ 1 999.00</td>
              <td>
                <a class="btn btn-outline-danger btn-sm delete-btn" href="#" data-method="post"
                  data-confirm="Are you sure want to remove this product from cart ?">Delete</a>
              </td>
            </tr>
            <tr data-id="4" data-url="/cart/change-quantity">
              <td>Samsung A3</td>
              <td>
                <img src="public/img/product 2.jpg" style="width: 70px" alt="Samsung Galaxy gì gì đó">
              </td>
              <td class="unit-price">$ 100.00</td>
              <td>
                <input type="number" min="1" class="form-control item-quantity" style="width: 60px" value="1">
              </td>
              <td class="row-total-cost">$ 100.00</td>
              <td>
                <a class="btn btn-outline-danger btn-sm delete-btn" href="#" data-method="post"
                  data-confirm="Are you sure want to remove this product from cart ?">Delete</a>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <th colspan="3">
                Summary
              </th>
              <td> <input type="number" min="1" class="form-control" id="summary-quantity" readonly style="width: 60px" value="2"></td>
              <td id="summary-total-cost">$ 1000.00</td>
            </tr>
          </tfoot>
        </table>

        <div class="card-body text-right">
          <a class="btn btn-primary" href="#">Checkout</a>
        </div>
      </div>
    </div>
  </div>
  <div id="footer"></div>

  <script src="public/assets/bootstrap-4.6.2/js/bootstrap.bundle.min.js"></script>
  <script defer src="/public/js/cart.js"></script>
  <script>
    $(document).ready(function() {
      $('.item-quantity').on('input', function() {
        var quantity = $(this).val();
  
        var unitPrice = parseFloat($(this).closest('tr').find('.unit-price').text().replace('$', '').replace(/ /g, '').trim());
  
        var rowTotalCost = quantity * unitPrice;
  
        $(this).closest('tr').find('.row-total-cost').text('$ ' + rowTotalCost.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
  
        updateSummary();
      });
  
      function updateSummary() {
        var totalQuantity = 0;
        var totalCost = 0;
  
        $('.item-quantity').each(function() {
          var quantity = parseFloat($(this).val());
          var unitPrice = parseFloat($(this).closest('tr').find('.unit-price').text().replace('$', '').replace(/ /g, '').trim());
  
          totalQuantity += quantity;
          totalCost += quantity * unitPrice;
        });
  
        // Update the summary row with the calculated values
        $('#summary-quantity').val(totalQuantity);
        $('#summary-total-cost').text('$ ' + totalCost.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','));
  
      }
    });
  </script>
  
</body>

</html>